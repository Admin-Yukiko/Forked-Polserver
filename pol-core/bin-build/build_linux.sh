#!/bin/sh
CPU_CORES=`grep -c ^processor /proc/cpuinfo`
SYSTEM=`lsb_release -d -s`
PHYS_MEM_GB=$((`grep MemTotal /proc/meminfo | awk '{print $2}'` / 1024 / 1024))
echo "###########################################################################################################"
echo "########################### Starting build of POL from www.polserver.com ##################################"
echo "###########################################################################################################"
echo "System           : $SYSTEM"
echo "CPU cores        : $CPU_CORES"
echo "Memory size (GB) : $PHYS_MEM_GB"
echo "###################################################################################"
echo "########################### Prepraring CMake  #####################################"
echo "###################################################################################"
cmake ../..
echo "###################################################################################"
echo "########################### Compiling + Linking  ##################################"
echo "###################################################################################"
make -f ../../pol-core/Makefile -j $((CPU_CORES + 1))
